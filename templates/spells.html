{% extends "base.html" %}
{% block content %}

    <div class="row login-card">
        <div class="col s12 m8 offset-m2">
            <div class="card-panel">
                <h3 class="indigo-text text-lighten-4 center-align">Magic Spells</h3>

                <div class="row card-panel grey lighten-5">
                    <form action="{{ url_for('search') }}" method="POST" class="col s12">
                        <div class="row valign-wrapper center-align">
                            <div class="input-field col s12 m8">
                                <i class="fas fa-search prefix text-light-green text-darken-4 text-shadow"></i>
                                <input type="text" name="query" id="query" minlength="3" class="validate" required>
                                <label for="query">Search Spells</label>
                            </div>
                            <div class="col s12 m4">
                                <a href="{{ url_for('get_spells') }}" class="red darken-2 btn text-shadow waves-effect waves-light">Reset</a>
                                <button type="submit" class="purple darken-2 btn text-shadow waves-effect waves-light">
                                    <i class="fas fa-search left"></i> Search
                                </button>
                            </div>
                        </div>
                    </form>
                </div>

                {% if spells|length > 0 %}
                <ul class="collapsible">
                    {% for spell in spells %}
                    <li>
                        <div class="collapsible-header indigo-text text-lighten-4 grey darken-3 text-shadow">
                            <div class="col s3">
                                <i class="fas fa-caret-down"></i>
                            </div>
                            <div class="col s9">
                                <strong>{{ spell.spell_title }}</strong> : {{ spell.spell_date }}
                            </div>
                        </div>
                        <div class="collapsible-body indigo-text text-lighten-4 grey darken-2">
                            <strong>{{ spell.category_name }}</strong>
                            <p>{{ spell.spell_description }}</p>
                            <p>{{ spell.spell_list }}</p>
                            <p>{{ spell.spell_process }}</p>
                            <p><em>Added by: {{ spell.added_by }}</em></p>
                        </div>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                    <h3 class="red-text text-darken-4 center-align">No Results Found</h3>
                {% endif %}
    
            </div>
        </div>    
    </div>

{% endblock %}